{{- $pages := slice -}}
{{- range . -}}
  {{- if .Param "navigation-hide" -}}
    {{- continue -}}
  {{- end -}}
  {{- $title := partialCached "utils/title" . .Path -}}
  {{- if not $title.name -}}
    {{- continue -}}
  {{- end -}}
  {{- $order := add (.Param "navigation-order" | default 0) 50000 -}}
  {{- $level := 0 -}}
  {{- if findRE `^\d+$` $title.level -}}
    {{- $level = add $title.level 500 -}}
  {{- end -}}
  {{- $weight := printf "%05d__%03d__%s" $order $level $title.name -}}
  {{- $pages = $pages | append (dict "page" . "weight" $weight) -}}
{{- end -}}
{{- $ret := slice -}}
{{- range sort $pages "weight" "asc" -}}
  {{- $ret = $ret | append .page -}}
{{- end -}}
{{- return $ret -}}
